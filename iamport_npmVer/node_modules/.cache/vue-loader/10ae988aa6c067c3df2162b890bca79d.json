{"remainingRequest":"C:\\Users\\ale78\\OneDrive\\바탕 화면\\iamport-vue-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ale78\\OneDrive\\바탕 화면\\iamport-vue-example\\src\\views\\Payment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ale78\\OneDrive\\바탕 화면\\iamport-vue-example\\src\\views\\Payment.vue","mtime":1718864543684},{"path":"C:\\Users\\ale78\\OneDrive\\바탕 화면\\iamport-vue-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1718866008596},{"path":"C:\\Users\\ale78\\OneDrive\\바탕 화면\\iamport-vue-example\\node_modules\\babel-loader\\lib\\index.js","mtime":1718866008545},{"path":"C:\\Users\\ale78\\OneDrive\\바탕 화면\\iamport-vue-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1718866008596},{"path":"C:\\Users\\ale78\\OneDrive\\바탕 화면\\iamport-vue-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1718866066531}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBQR1MgfSBmcm9tICcuLi9jb25zdGFudHMnOw0KaW1wb3J0IFV0aWxzIGZyb20gJy4uL3V0aWxzJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3JtTGF5b3V0OiAnaG9yaXpvbnRhbCcsDQogICAgICBmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcywgeyBuYW1lOiAncGF5bWVudCcgfSksDQogICAgICBpbml0aWFsTWVyY2hhbnRVaWQ6IGBtaWRfJHtuZXcgRGF0ZSgpLmdldFRpbWUoKX1gLA0KICAgICAgcGdzOiBQR1MsDQogICAgICBtZXRob2RzOiBVdGlscy5nZXRNZXRob2RzQnlQZygpLA0KICAgICAgcXVvdGFzOiBVdGlscy5nZXRRdW90YUJ5UGcoKSwNCiAgICAgIGluaXRpYWxNZXRob2Q6ICdjYXJkJywNCiAgICAgIHZiYW5rRHVlVmlzaWJsZTogZmFsc2UsDQogICAgICBiaXpOdW1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIHF1b3RhVmlzaWJsZTogdHJ1ZSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlU3VibWl0KGUpIHsNCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgIHRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCB2YWx1ZXMpID0+IHsNCiAgICAgICAgaWYgKCFlcnIpIHsNCiAgICAgICAgICBjb25zdCB7DQogICAgICAgICAgICBwZywNCiAgICAgICAgICAgIHBheU1ldGhvZCwNCiAgICAgICAgICAgIGVzY3JvdywNCiAgICAgICAgICAgIHZiYW5rRHVlLA0KICAgICAgICAgICAgYml6TnVtLA0KICAgICAgICAgICAgcXVvdGEsDQogICAgICAgICAgICBtZXJjaGFudFVpZCwNCiAgICAgICAgICAgIG5hbWUsDQogICAgICAgICAgICBhbW91bnQsDQogICAgICAgICAgICBidXllck5hbWUsDQogICAgICAgICAgICBidXllclRlbCwNCiAgICAgICAgICAgIGJ1eWVyRW1haWwsDQogICAgICAgICAgICBidXllckFkZHIsDQogICAgICAgICAgICBidXllclBvc3Rjb2RlLA0KICAgICAgICAgIH0gPSB2YWx1ZXM7DQogICAgICAgICAgY29uc3QgeyBJTVAgfSA9IHdpbmRvdzsNCiAgICAgICAgICBJTVAuaW5pdChVdGlscy5nZXRVc2VyQ29kZUJ5UGcocGcpKTsNCiAgICAgICAgICBjb25zdCBkYXRhID0gew0KICAgICAgICAgICAgcGcsDQogICAgICAgICAgICBwYXlfbWV0aG9kOiBwYXlNZXRob2QsDQogICAgICAgICAgICBlc2Nyb3csDQogICAgICAgICAgICBtZXJjaGFudF91aWQ6IG1lcmNoYW50VWlkLA0KICAgICAgICAgICAgbmFtZSwNCiAgICAgICAgICAgIGFtb3VudCwNCiAgICAgICAgICAgIGJ1eWVyX25hbWU6IGJ1eWVyTmFtZSwNCiAgICAgICAgICAgIGJ1eWVyX3RlbDogYnV5ZXJUZWwsDQogICAgICAgICAgICBidXllcl9lbWFpbDogYnV5ZXJFbWFpbCwNCiAgICAgICAgICAgIGJ1eWVyX2FkZHI6IGJ1eWVyQWRkciwNCiAgICAgICAgICAgIGJ1eWVyX3Bvc3Rjb2RlOiBidXllclBvc3Rjb2RlLA0KICAgICAgICAgICAgbmljZU1vYmlsZVYyOiB0cnVlLA0KICAgICAgICAgIH07DQoNCiAgICAgICAgICBpZiAocGF5TWV0aG9kID09PSAndmJhbmsnKSB7DQogICAgICAgICAgICBkYXRhLnZiYW5rX2R1ZSA9IHZiYW5rRHVlOw0KICAgICAgICAgICAgaWYgKHBnID09PSAnZGFuYWxfdHBheScpIHsNCiAgICAgICAgICAgICAgZGF0YS5iaXpfbnVtID0gYml6TnVtOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAocGF5TWV0aG9kID09PSAnY2FyZCcpIHsNCiAgICAgICAgICAgIGRhdGEuZGlzcGxheSA9IHsNCiAgICAgICAgICAgICAgY2FyZF9xdW90YTogcXVvdGEsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0NCiAgICAgICAgICBJTVAucmVxdWVzdF9wYXkoZGF0YSwgdGhpcy5jYWxsYmFjayk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlUGcocGcpIHsNCiAgICAgIGNvbnN0IG5ld01ldGhvZHMgPSBVdGlscy5nZXRNZXRob2RzQnlQZyhwZyk7DQogICAgICBjb25zdCBbeyB2YWx1ZSB9XSA9IG5ld01ldGhvZHM7DQoNCiAgICAgIHRoaXMubWV0aG9kcyA9IFV0aWxzLmdldE1ldGhvZHNCeVBnKHBnKTsNCiAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSh7DQogICAgICAgIHBheU1ldGhvZDogdmFsdWUsDQogICAgICB9KTsNCg0KICAgICAgdGhpcy5zZXRWaXNpYmxlKHBnLCB2YWx1ZSk7DQogICAgfSwNCiAgICBoYW5kbGVNZXRob2QobWV0aG9kKSB7DQogICAgICBjb25zdCBwZyA9IHRoaXMuZm9ybS5nZXRGaWVsZFZhbHVlKCdwZycpOw0KICAgICAgdGhpcy5zZXRWaXNpYmxlKHBnLCBtZXRob2QpOw0KICAgIH0sDQogICAgc2V0VmlzaWJsZShwZywgbWV0aG9kKSB7DQogICAgICAvLyDqsIDsg4Hqs4Tsoowg7J6F6riI6riw7ZWcIOugjOuNlOungSDsl6zrtoANCiAgICAgIGNvbnN0IHZiYW5rRHVlVmlzaWJsZSA9IG1ldGhvZCA9PT0gJ3ZiYW5rJzsNCiAgICAgIHRoaXMudmJhbmtEdWVWaXNpYmxlID0gdmJhbmtEdWVWaXNpYmxlOw0KDQogICAgICAvLyDsgqzsl4XsnpAg67KI7Zi4IOugjOuNlOungSDsl6zrtoANCiAgICAgIHRoaXMuYml6TnVtVmlzaWJsZSA9IHBnID09PSAnZGFuYWxfdHBheScgJiYgdmJhbmtEdWVWaXNpYmxlOw0KDQogICAgICAvLyDtlaDrtoDqsJzsm5TsiJgg66CM642U66eBIOyXrOu2gA0KICAgICAgdGhpcy5xdW90YVZpc2libGUgPSBtZXRob2QgPT09ICdjYXJkJzsNCiAgICB9LA0KICAgIGhhbmRsZUdvQmFjaygpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7DQogICAgfSwNCiAgICBjYWxsYmFjayhyZXNwb25zZSkgew0KICAgICAgLy8g67O47J247J247KadIOyiheujjCDtm4QgcmVzdWx0IO2OmOydtOyngOuhnCDsnbTrj5kNCiAgICAgIGNvbnN0IHF1ZXJ5ID0gew0KICAgICAgICAuLi5yZXNwb25zZSwNCiAgICAgICAgdHlwZTogJ3BheW1lbnQnLA0KICAgICAgfTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9yZXN1bHQnLCBxdWVyeSB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Payment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Payment.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"imp-container\">\r\n    <h1>아임포트 결제</h1>\r\n    <a-form\r\n      :form=\"form\"\r\n      :label-col=\"{ span: 6 }\"\r\n      :wrapper-col=\"{ span: 18 }\"\r\n      :colon=\"false\"\r\n      labelAlign=\"left\"\r\n      @submit=\"handleSubmit\"\r\n    >\r\n      <a-form-item label=\"PG사\">\r\n        <a-select\r\n          v-decorator=\"['pg', { initialValue: 'html5_inicis' }]\"\r\n          size=\"large\"\r\n          @change=\"handlePg\"\r\n        >\r\n          <a-select-option\r\n            v-bind:key=\"pg.value\"\r\n            v-for=\"pg in pgs\"\r\n            :value=\"pg.value\"\r\n          >\r\n            {{ pg.label }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n      <a-form-item label=\"결제수단\">\r\n        <a-select\r\n          v-decorator=\"['payMethod', { initialValue: 'card' }]\"\r\n          size=\"large\"\r\n          @change=\"handleMethod\"\r\n        >\r\n          <a-select-option\r\n            v-bind:key=\"method.value\"\r\n            v-for=\"method in methods\"\r\n            :value=\"method.value\"\r\n          >\r\n            {{ method.label }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n      <a-form-item label=\"에스크로 결제여부\" class=\"imp-payment-escrow\">\r\n        <a-switch v-decorator=\"['escrow', { valuePropName: 'checked' }]\" />\r\n      </a-form-item>\r\n      <a-form-item label=\"입금기한\" v-if=\"vbankDueVisible\">\r\n        <a-input\r\n          v-decorator=\"[\r\n            'vbankDue',\r\n            {\r\n              rules: [{ required: true, message: '가상계좌 입금기한은 필수입력입니다' }],\r\n            }\r\n          ]\"\r\n          placeholder=\"YYYYMMDDhhmm\"\r\n          size=\"large\"\r\n          type=\"number\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"사업자번호\" v-if=\"bizNumVisible\">\r\n        <a-input\r\n          v-decorator=\"[\r\n            'bizNum',\r\n            {\r\n              rules: [{ required: true, message: '사업자번호는 필수입력입니다' }],\r\n            }\r\n          ]\"\r\n          size=\"large\"\r\n          type=\"number\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"할부개월수\" v-if=\"quotaVisible\">\r\n        <a-select\r\n          v-decorator=\"['quota', { initialValue: '0' }]\"\r\n          size=\"large\"\r\n        >\r\n          <a-select-option\r\n            v-bind:key=\"quota\"\r\n            v-for=\"quota in quotas\"\r\n            :value=\"quota\"\r\n          >\r\n            {{ quota === '0' ? 'PG사 기본제공' : quota === '1' ? '일시불' : `${quota}개월` }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n      <a-form-item label=\"주문번호\">\r\n        <a-input\r\n          v-decorator=\"[\r\n            'merchantUid',\r\n            { initialValue: initialMerchantUid },\r\n          ]\"\r\n          size=\"large\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"주문명\">\r\n        <a-input\r\n          v-decorator=\"['name', { initialValue: '아임포트 VueJS 테스트 결제' }]\"\r\n          size=\"large\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"결제금액\">\r\n        <a-input\r\n          v-decorator=\"['amount', { initialValue: '1000' }]\"\r\n          size=\"large\"\r\n          type=\"number\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"이름\">\r\n        <a-input\r\n          v-decorator=\"['buyerName', { initialValue: '홍길동' }]\"\r\n          size=\"large\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"연락처\">\r\n        <a-input\r\n          v-decorator=\"['buyerPhone', { initialValue: '01012341234' }]\"\r\n          size=\"large\"\r\n          type=\"number\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"이메일\">\r\n        <a-input\r\n          v-decorator=\"['buyerEmail', { initialValue: 'example@example.com' }]\"\r\n          size=\"large\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"주소\">\r\n        <a-input\r\n          v-decorator=\"['buyerAddr', { initialValue: '서울시 강남구 신사동 661-16' }]\"\r\n          size=\"large\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"우편번호\">\r\n        <a-input\r\n          v-decorator=\"['buyerPostcode', { initialValue: '06010' }]\"\r\n          size=\"large\"\r\n          type=\"number\"\r\n        />\r\n      </a-form-item>\r\n      <a-button size=\"large\" @click=\"handleGoBack\">\r\n        뒤로가기\r\n      </a-button>\r\n      <a-button type=\"primary\" html-type=\"submit\" size=\"large\">\r\n        결제하기\r\n      </a-button>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { PGS } from '../constants';\r\nimport Utils from '../utils';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      formLayout: 'horizontal',\r\n      form: this.$form.createForm(this, { name: 'payment' }),\r\n      initialMerchantUid: `mid_${new Date().getTime()}`,\r\n      pgs: PGS,\r\n      methods: Utils.getMethodsByPg(),\r\n      quotas: Utils.getQuotaByPg(),\r\n      initialMethod: 'card',\r\n      vbankDueVisible: false,\r\n      bizNumVisible: false,\r\n      quotaVisible: true,\r\n    };\r\n  },\r\n  methods: {\r\n    handleSubmit(e) {\r\n      e.preventDefault();\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          const {\r\n            pg,\r\n            payMethod,\r\n            escrow,\r\n            vbankDue,\r\n            bizNum,\r\n            quota,\r\n            merchantUid,\r\n            name,\r\n            amount,\r\n            buyerName,\r\n            buyerTel,\r\n            buyerEmail,\r\n            buyerAddr,\r\n            buyerPostcode,\r\n          } = values;\r\n          const { IMP } = window;\r\n          IMP.init(Utils.getUserCodeByPg(pg));\r\n          const data = {\r\n            pg,\r\n            pay_method: payMethod,\r\n            escrow,\r\n            merchant_uid: merchantUid,\r\n            name,\r\n            amount,\r\n            buyer_name: buyerName,\r\n            buyer_tel: buyerTel,\r\n            buyer_email: buyerEmail,\r\n            buyer_addr: buyerAddr,\r\n            buyer_postcode: buyerPostcode,\r\n            niceMobileV2: true,\r\n          };\r\n\r\n          if (payMethod === 'vbank') {\r\n            data.vbank_due = vbankDue;\r\n            if (pg === 'danal_tpay') {\r\n              data.biz_num = bizNum;\r\n            }\r\n          }\r\n          if (payMethod === 'card') {\r\n            data.display = {\r\n              card_quota: quota,\r\n            };\r\n          }\r\n          IMP.request_pay(data, this.callback);\r\n        }\r\n      });\r\n    },\r\n    handlePg(pg) {\r\n      const newMethods = Utils.getMethodsByPg(pg);\r\n      const [{ value }] = newMethods;\r\n\r\n      this.methods = Utils.getMethodsByPg(pg);\r\n      this.form.setFieldsValue({\r\n        payMethod: value,\r\n      });\r\n\r\n      this.setVisible(pg, value);\r\n    },\r\n    handleMethod(method) {\r\n      const pg = this.form.getFieldValue('pg');\r\n      this.setVisible(pg, method);\r\n    },\r\n    setVisible(pg, method) {\r\n      // 가상계좌 입금기한 렌더링 여부\r\n      const vbankDueVisible = method === 'vbank';\r\n      this.vbankDueVisible = vbankDueVisible;\r\n\r\n      // 사업자 번호 렌더링 여부\r\n      this.bizNumVisible = pg === 'danal_tpay' && vbankDueVisible;\r\n\r\n      // 할부개월수 렌더링 여부\r\n      this.quotaVisible = method === 'card';\r\n    },\r\n    handleGoBack() {\r\n      this.$router.push('/');\r\n    },\r\n    callback(response) {\r\n      // 본인인증 종료 후 result 페이지로 이동\r\n      const query = {\r\n        ...response,\r\n        type: 'payment',\r\n      };\r\n      this.$router.push({ path: '/result', query });\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}